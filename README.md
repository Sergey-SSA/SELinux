README.md
# Практика с SELinux

**Задача 1**

Запустить nginx на нестандартном порту 3-мя разными способами.

Для выполнения задачи разворачивается машина с помошью Vagrantfile со всеми необходимыми инструментами в provision.
Далее меняется порт nginx на нестандартный и после его перезапуска получаю ошибку.
![Ошибка](screenshots/1.png)

**1 способ решить задачу**

C помощью переключателя `setsebool` командой `setsebool -P nis_enabled 1` Флаг -P используется для внесения изменений на постоянной основе.

После перезапуска nginx, полчил необходимый результат.
![2](screenshots/2.png)

**2 способ решить задачу**

Добавление нестандартного порта в имеющийся тип

Вернул значение переключателя `nis_enabled` и перезапустил nginx. Убедился что он не запускается.
![3](screenshots/3.png)

Вывел список разрешенных SELinux'ом портов для типа http_port_t:

```
[root@selinux ~]# semanage port -l | grep -w http_port_t
http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000
```

Видно, что порта 8888 в списке нет. Добавил его:

```
[root@selinux ~]# semanage port -l | grep -w http_port_t
http_port_t                    tcp      8888, 80, 81, 443, 488, 8008, 8009, 8443, 9000
```

Перезапустил nginx и проверил

![4](screenshots/4.png)

**3 способ решить задачу**

Формирование и установка модуля SELinux

> semanage port -d -t http_port_t -p tcp 8888

![5](screenshots/5.png)
